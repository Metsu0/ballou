<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <record id="view_employee_spinneret_filter" model="ir.ui.view">
      <field name="name">hr.employee.search</field>
      <field name="model">hr.employee</field>
      <field name="arch" type="xml">
        <search string="Employees">
          <field name="name" string="Employees"
                 filter_domain="['|',('work_email','ilike',self),('name','ilike',self)]"/>
          <field name="spinneret_id"/>
        </search>
      </field>
    </record>
    <record id="act_employee_from_spinneret" model="ir.actions.act_window">
      <field name="name">Employees</field>
      <field name="res_model">hr.employee</field>
      <field name="view_mode">kanban,form,tree</field>
      <field name="search_view_id" ref="view_employee_spinneret_filter"/>
      <field name="context">{
        "search_default_spinneret_id": [active_id],
        "default_spinneret_id": active_id}
      </field>
    </record>

    <record id="hr_spinneret_view_kanban" model="ir.ui.view">
      <field name="name">hr.spinneret.kanban</field>
      <field name="model">hr.spinneret</field>
      <field name="arch" type="xml">
        <kanban class="oe_background_grey o_kanban_dashboard o_hr_kanban">
          <field name="name"/>
          <field name="number_of_employees"/>
          <templates>
            <t t-name="kanban-box">
              <div>
                <div t-attf-class="o_kanban_card_header">
                  <div class="o_kanban_card_header_title">
                    <div class="o_primary">
                      <field name="name"/>
                    </div>
                  </div>
                  <div class="o_kanban_manage_button_section">
                    <a class="o_kanban_manage_toggle_button" href="#">
                      <i class="fa fa-ellipsis-v" role="img" aria-label="Manage" title="Manage"/>
                    </a>
                  </div>
                </div>
                <div class="container o_kanban_card_content">
                  <div class="row">
                    <div class="col-6 o_kanban_primary_left">
                      <span>
                        <field name="number_of_employees"/>
                      </span>
                      <button class="btn btn-primary" name="%(act_employee_from_spinneret)d" type="action">Employees
                      </button>
                    </div>
                    <div class="col-6 o_kanban_primary_right">
                    </div>
                  </div>
                </div>
                <div class="container o_kanban_card_manage_pane dropdown-menu" role="menu">
                  <div t-if="widget.editable" class="o_kanban_card_manage_settings row">
                    <div class="text-right">
                      <a role="menuitem" type="edit">Settings</a>
                    </div>
                  </div>
                </div>

              </div>
            </t>
          </templates>
        </kanban>
      </field>
    </record>

    <record id="view_employee_form_inherit_spinneret" model="ir.ui.view">
      <field name="name">view.employee.form.inherit.spinneret</field>
      <field name="model">hr.employee</field>
      <field name="inherit_id" ref="hr.view_employee_form"/>
      <field name="arch" type="xml">
        <xpath expr="//field[@name='department_id']" position="after">
          <field name="spinneret_id"/>
        </xpath>
      </field>
    </record>

    <record id="open_spinneret" model="ir.actions.act_window">
      <field name="name">Spinneret</field>
      <field name="res_model">hr.spinneret</field>
      <field name="view_mode">kanban,tree,form</field>
      <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
          Create a new spinneret
        </p>
        <p>
          ....
        </p>
      </field>
    </record>
    <menuitem
            name="Spinneret"
            action="open_spinneret"
            id="menu_hr_spinneret"
            parent="sirh_hr.skill_matrix_menu"
            sequence="40"
            groups="hr.group_hr_user"/>
  </data>
</odoo>